\section{Graphical DSL using GMF}
\label{sec.gmf}

\noindent \emph{GMF}\footnote{Graphical Modeling Framework} is a framework for
building modeling-like graphical Eclipse-based editors.
\cite{Article_Introducing_GMF} GMF supports the generation of a graphical editor
from a set of models. In this section we will present the important
milestones of creating a graphical editor and why were they necessary. These
are:

\begin{itemize}
  \item Graphical Definition Model
  \item Tooling Definition Model
  \item Mapping Model
  \item Diagram Generation Model
  \item Code Generation and creating models
  \item Additional remarks
\end{itemize}
Next we will introduce the steps taken in order to achieve
that and the outcome of each.\\

\noindent Earlier we described how we created the Ecore Domain Model. The Ecore
model defines the non-graphical information managed by the editor. The first
model needed for the editor is the Graphical Definition Model (gmfgraph) which
is used to define graphical elements (figures, nodes, links)
which will be displayed in the editor. \\

\noindent Afterwards we created the Tooling Definition Model (gmftool),
which is used to specify the palette, creation tools and actions for the
graphical elements. The Mapping Model (gmfmap) is combined of the three
previously created definition models (domain, graphical and tooling).
It provides the input for the transformation step. Also, the Audit Rules
(constraints) can be added here. The Mapping model is then transformed into the Diagram
Geneneration Model (gmfgen). This model is used for generating the code for the graphical
editor. It is similar to the EMF genmodel, mentioned earlier.
\cite{GMF_Tutorial}\\

\noindent Having all the models it is possible to generate the code necessary
for a running diagram editor. When the user creates a new NBS diagram he is
shown a canvas where elements of the model can be dragged and dropped from the
palette. There are no connections between the certain parts
of the bicycle, because they can be placed in any order and different bicycles
might have different amount of parts. This is a more intuitive way to interact
with the system for the customers of NBS.\\

\noindent The user has the possibility to change the name of a part but changing
the price is not allowd in the canvas. It is only possible to change the
price in the Properties view. For that reason the Properties view should not be
shown to the customer in the final implementation. The OCL Constraints are
implemented in the GMF, specifically in the gmfmap as Audit Rules. The errors are shown as in the Figure \ref{fig.gmf_validation}\\

\noindent At this point there are two ways to create a new bicycle model. Either
by creating a tree based editor where the user has to add parts of the bike as
children to the Bicycle node. The second option is by using the GMF based
graphical editor we just developed. \\

\noindent Feature initializers were not a part of the implementation, however
they could be useful. Every new bicycle model could have
additional parameters with name and value set added on the initialization. For instance, this could be a new parameter named
'Telephone Number' having an empty default value.\\ Modelling link
constraints were also not a part of implementation, since we do not use links in the
project. None the less, it is a useful feature that allows to constrain users
from linking objects together. \\
